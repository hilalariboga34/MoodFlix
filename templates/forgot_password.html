{% extends "base.html" %}
{% block title %}Åžifremi Unuttum - MoodFlix{% endblock %}

{% block content %}
<div class="form-page">
    <div class="form-card">
        <h1>ðŸ”‘ Åžifremi Unuttum</h1>

        {% with messages = get_flashed_messages(with_categories=true) %}
          {% for category, message in messages %}
            <p class="error">{{ message }}</p>
          {% endfor %}
        {% endwith %}

        {% if session.step == "awaiting_code" %}
            <form method="POST">
                <input type="hidden" name="step" value="verify_code">
                <div class="form-group">
                    <input type="text" name="code" required>
                    <label>6 Haneli Kod</label>
                </div>
                <button type="submit" class="form-btn">Kodu DoÄŸrula</button>
            </form>

        {% elif session.step == "awaiting_password" %}
            <form method="POST">
                <input type="hidden" name="step" value="reset_password">
                <div class="form-group">
                    <input type="password" name="new_password" required>
                    <label>Yeni Åžifre</label>
                </div>
                <button type="submit" class="form-btn">Åžifreyi SÄ±fÄ±rla</button>
            </form>

        {% else %}
            <form method="POST">
                <input type="hidden" name="step" value="send_code">
                <div class="form-group">
                    <input type="email" name="email" required>
                    <label>E-posta adresin</label>
                </div>
                <button type="submit" class="form-btn">Kod GÃ¶nder</button>
            </form>
        {% endif %}
    </div>
</div>
{% endblock %}
