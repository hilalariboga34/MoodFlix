{% extends "base.html" %}
{% block title %}Ge√ßmi≈ü √ñneriler - MoodFlix{% endblock %}

{% block content %}
<div class="container">
    <h2>üìú Ge√ßmi≈ü Film √ñnerilerin</h2>

    {% if grouped_data %}
        {% for question, movies in grouped_data.items() %}
        <div class="accordion-block">
            <button class="accordion-header" onclick="toggleAccordion(this)">
                üëâ "{{ question }}"
            </button>
            <div class="accordion-body" style="display: none;">
                <ul>
                    {% for movie in movies %}
                    <li>
                        <strong>üé¨ √ñnerilen Film:</strong>
                        <a href="{{ url_for('movie_detail', movie_id=movie.id) }}">{{ movie.title }}</a><br>
                        <small><em>{{ movie.timestamp }}</em></small>
                    </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
        {% endfor %}
    {% else %}
        <p>Hen√ºz hi√ß √∂neri ge√ßmi≈üin yok.</p>
    {% endif %}
</div>

<script>
    function toggleAccordion(button) {
        const content = button.nextElementSibling;

        // Diƒüer t√ºm a√ßƒ±klarƒ± kapat
        document.querySelectorAll('.accordion-body').forEach(el => {
            if (el !== content) el.style.display = 'none';
        });

        // Bu a√ß/kapat
        content.style.display = (content.style.display === 'block') ? 'none' : 'block';
    }
</script>
{% endblock %}
